<tool id="mtx_model" name="MTX Model" version="@TOOL_VERSION@+galaxy@VERSION_SUFFIX@" profile="@PROFILE@">
    <description>For metatranscriptomics (MTX) modeling based on MaAsLin2</description>
    <macros>
        <import>macros.xml</import>
    </macros>
    <expand macro="edam_ontology"/>
    <expand macro="requirements"/>
    <version_command>MTXmodel.R -v</version_command>
    <command detect_errors="exit_code"><![CDATA[
MTXmodel.R
    --min_abundance '$min_abundance'
    --min_prevalence '$min_prevalence'
    --min_variance '$min_variance'
    --max_significance '$max_significance'
    --normalization '$normalization'
    --transform '$transform'
    --analysis_method '$analysis_method'
    --random_effects '$random_effects'
    --fixed_effects '$fixed_effects'
    --correction '$correction'
    --standardize '$standardize'
    --plot_heatmap '$plot_heatmap'
    --heatmap_first_n '$heatmap_first_n'
    --plot_scatter '$plot_scatter'
    --cores '$cores'
    --reference '$reference'
    --input_dnadata '$input_dnadata'
    --rna_dna_flt '$rna_dna_flt'
    ]]></command>
    <inputs>
        <param argument="--min_abundance" type="integer" value="0" optional="true" label="Minimum abundance" help="The minimum abundance for each feature"/>
        <param argument="--min_prevalence" type="float" value="0.1" optional="true" label="Minimum prevalence" help="The minimum percent of samples for which a feature is detected at minimum abundance"/>
        <param argument="--min_variance" type="integer" value="0" optional="true" label="Minimum variance" help="Keep features with variances greater than value"/>
        <param argument="--max_significance" type="float" value="0.25" optional="true" label="Maximum significance" help="The q-value threshold for significance"/>
        <param argument="--normalization" type="select" optional="true" label="The normalization method to apply">
            <option value="TSS" selected="true">TSS</option>
            <option value="CLR">CLR</option>
            <option value="CSS">CSS</option>
            <option value="NONE">NONE</option>
            <option value="TMM">TMM</option>
        </param>
        <param argument="--transform" type="select" optional="true" label="The transform to apply">
            <option value="LOG" selected="true">LOG</option>
            <option value="LOGIT">LOGIT</option>
            <option value="AST">AST</option>
            <option value="NONE">NONE</option>
            <option value="PA">PA</option>     
        </param>
        <param argument="--analysis_method" type="select" optional="true" label="The analysis method to apply">
            <option value="LM" selected="true">LM</option>
            <option value="CPLM">CPLM</option>
            <option value="NEGBIN">NEGBIN</option>
            <option value="ZINB">ZINB</option>
            <option value="LOGIT">LOGIT</option>     
        </param>
        <param argument="--standardize" type="boolean" truevalue="--standardize" falsevalue="" checked="false" label="Apply z-score so continuous metadata are on  the same scale"/>
        <param argument="--plot_heatmap" type="boolean" truevalue="--plot_heatmap" falsevalue="" checked="false" label="Generate a heatmap for the significant  associations"/>
        <param argument="--plot_scatter" type="integer" value="50" optional="true" label="Plot scatter" help="Generate scatter plots for the significant  associations"/>
        <param argument="--cores" type="integer" value="1" optional="true" label="Cores" help="The number of R processes to  run in parallel"/>
        <param argument="--input_dnadata" type="data" format="tabular,tsv" optional="true" label=" Input DNA adata" help="The DNA abundance for each feature"/>
        
   </inputs>
   <outputs>    
    </outputs>
    <tests>
    </tests>
    <help><![CDATA[
@HELP_HEADER@

MTX Model
=========

Note
====

Input
=====

Output
======

    ]]></help> 
    <citations>
        <citation type="doi">10.1093/bioinformatics/btab327</citation>
    </citations>
 </tool>