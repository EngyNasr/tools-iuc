<tool id="picrust2_shuffle_predictions" name="Generating shuffled predictions" version="@TOOL_VERSION@+galaxy@VERSION_SUFFIX@" profile="@PROFILE@">
    <description>Shuffles sequence ids of prediction table for a specified number of replicates</description>
    <macros>
        <import>macros.xml</import>
    </macros>
    <expand macro="edam_ontology"/>
    <expand macro="requirements"/>
    <version_command>shuffle_predictions.py -v</version_command>
    <command detect_errors="exit_code"><![CDATA[
shuffle_predictions.py
    --input '$input'
    --outdir 'predicted_shuffled'
    --rep '$rep'
#if $seed    
    --seed '$seed'
#end if
&&
cd ./predicted_shuffled
&& ls .
    ]]></command>
    <inputs>
        <param name="input" type="data" format="tsv,tabular" label="Input prediction table"/>
        <param argument="--rep" type="integer" value="1" label="Number of shuffled replicates to create"/>
        <param name="seed" type="integer" optional="true" label="Random seed: set this if you want reproducible shufflings"/>
    </inputs>
    <outputs>
        <data name="predicted_shuffled_output" format="tsv" from_work_dir="*.tsv" label="Predicted shuffled">
        </data>
    </outputs>
    <tests>
    <test expect_num_outputs="1">
        <param name="input" value="EC_predicted.tsv.gz"/>
        <param name="rep" value="1"/>
    </test>
    </tests>
    <help><![CDATA[
@HELP_HEADER@

Generating shuffled predictions
===============================
Shuffles sequence ids of prediction table for a specified number of replicates.

Note
====
This means that the prediction table is not totally scrambled across all colunmns: each predicted genome is still the same, but the sequence ids (e.g. the ASV id) linked with each predicted genome is randomized.

Input
=====
Prediction table

Output
======
Predicted shuffled table

    ]]></help> 
    <citations>
        <citation type="doi">10.1038/s41587-020-0548-6</citation>
    </citations>
</tool>